# Final-Project_2
The Yandex Practicum course Project, a course on Data Science, the final project for Module 2 on Yandex Afisha.

**Анализ лояльности пользователей сервиса «Яндекс Афиша»**

# 1. Вступление
## Цель и задачи проекта

**Цель проекта** — провести исследовательский анализ лояльности пользователей сервиса «Яндекс Афиша» и сформировать профиль пользователей, совершающих повторные покупки, для:
- выявления перспективных клиентов;
- формирования персонализированных предложений;
- настройки таргетированной рекламы;
- оптимизации маркетинговых бюджетов;
- повышения уровня удержания пользователей.

**Основные задачи проекта:**
- загрузка данных из базы PostgreSQL;
- предобработка и очистка данных;
- формирование пользовательских профилей;
- исследовательский анализ факторов первого заказа и поведения пользователей;
- анализ связей признаков с количеством заказов;
- формирование выводов и рекомендаций для бизнеса.

## Описание работы проекта

Проект реализован в виде последовательного аналитического пайплайна:

Знакомство с данными - Выгрузка данных с помощью SQL - 
Подключение к БД (Python) - Загрузка данных - Предобработка -
Агрегация заказов - Формирование профилей пользователей -
EDA и проверка гипотез - Корреляционный анализ -
Выводы и рекомендации

Этапы по Python выполнены в Jupyter Notebook.

## Контакты для обратной связи
Автор проекта: Юлия Дьяченко
Для обратной связи: мессенджер Пачка @y.arhangel

# 2. Installation

**Клонирование репозитория**
git clone https://github.com/YArhangel/Final-Project_2

**Создание виртуального окружения и установка зависимостей**

Рекомендуется использовать виртуальное окружение.

python -m venv venv
source venv/bin/activate        # Linux / macOS
venv\Scripts\activate           # Windows


**Установка зависимостей**

pip install -r requirements.txt

**Переменные окружения**

Для подключения к базе данных необходимо создать файл .env
(файл не хранится в репозитории, добавлен в .gitignore):

DB_USER=...
DB_PASSWORD=...
DB_HOST=...
DB_PORT=6432
DB_NAME=data-analyst-afisha

**DVC**

В данном проекте DVC не используется, так как данные загружаются напрямую из базы данных PostgreSQL.
Установка и настройка DVC не требуются.

# 3. Running in your environment

1. Активировать виртуальное окружение.
2. Запустить Jupyter Notebook: jupyter notebook
3. Открыть ноутбук: notebooks/Final_Project_2_151225.ipynb
4. Выполнить ячейки ноутбука последовательно сверху вниз.
Все данные загружаются напрямую из базы данных при выполнении SQL-запроса.

# 4. Existing stages

**Проект состоит из следующих логических этапов:**

***Загрузка и изучение данных***
- подключение к базе данных;
- загрузка заказов пользователей;
- первичный анализ данных.

***Предобработка данных***
- приведение выручки к единой валюте;
- обработка пропусков;
- проверка на дубликаты;
- преобразование типов данных;
- нормализация категориальных признаков;
- фильтрация выбросов.

***Создание профиля пользователя***
- агрегация заказов;
- расчёт пользовательских метрик;
- оценка качества полученных профилей.

***Исследовательский анализ данных***
- анализ признаков первого заказа;
- анализ поведения пользователей;
- проверка продуктовых гипотез;
- анализ временных характеристик;
- корреляционный анализ признаков.

***Итоговые выводы и рекомендации***
- интерпретация результатов;
- формирование рекомендаций для бизнеса.

# 5. Project structure

***Final_project2/***

*data/*

  - Source_data.sql # SQL-запрос
  - sheme.jpg # схема БД

*notebooks/*

  - Final_Project_2_151225.ipynb

.ipynb_checkpoints  # не отслеживается Git
environment.yml  # не отслеживается Git
requirements.txt
.env  # не отслеживается Git
.gitignore
README.md

Файлы и папки, добавленные в .gitignore, не входят в репозиторий и используются только локально.

# 6. Результаты и выводы (полный вариант в Final_Project_2_151225.ipynb)

Повторные покупки в большей степени определяются характеристиками, отражающими шаблоны поведения пользователей.

**Наиболее значимые факторы лояльности:**
- средний интервал между заказами;
- среднее количество билетов в заказе;
- средняя выручка.

**Характеристики первого заказа** (регион, устройство, тип мероприятия, билетный оператор) **не являются надёжными характеристиками для прогноза повторных покупок**.

**Перспективным сегментом** для роста **являются пользователи с 2–4 заказами.**